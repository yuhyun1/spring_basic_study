- κΉ€μν• μ¤ν”„λ§ κΈ°λ³ΈνΈ - μ„Ήμ… 3
    - μƒλ΅μ΄ ν• μΈ μ •μ±… κ°λ°
        - μ”κµ¬ μ‚¬ν•­ - κΈ°μ΅΄ μ£Όλ¬Έ κ±΄λ‹Ή 1000μ›μ”© μ •μ•΅ ν• μΈμ΄ μ•„λ‹ 10% μ •λ¥  ν• μΈμΌλ΅ λ³€κ²½
        - μμ μλ°” μ½”λ“λ΅ κ°λ°

        ```java
        package hello.core.discount;
        
        import hello.core.member.Grade;
        import hello.core.member.Member;
        
        public class RateDiscountPolicy implements DiscountPolicy {
        
        	private int discountPercent = 10; //10% ν• μΈ
        
        	@Override
        	public int discount(Member member, int price) {
        
        		if (member.getGrade() == Grade.VIP) {
        			return price * discountPercent / 100;
        		} else {
        			return 0;
        		}
        	}
        }
        ```

    - μƒλ΅μ΄ ν• μΈ μ •μ±… μ μ©κ³Ό λ¬Έμ μ 
        - ν• μΈ μ •μ±… λ³€κ²½ μ½”λ“

        ```java
        public class OrderServiceImpl implements OrderService {
        
        // private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
        	private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
        }
        ```

      λ¬Έμ μ  : OCP , DIP λ¥Ό μ§€ν‚¤μ§€ μ•κ³  μμ.

        - DIP : μ£Όλ¬Έ μ„λΉ„μ¤ ν΄λΌμ΄μ–ΈνΈ( `OrderServiceImpl` )λ” `DiscountPolicy` μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ©΄μ„ DIPλ¥Ό μ§€ν‚¨ κ²ƒ κ°™μ§€λ§, μ¶”μƒ(μΈν„°νμ΄μ¤) λΏλ§ μ•„λ‹λΌ κµ¬μ²΄(κµ¬ν„) ν΄λμ¤μ—λ„ μμ΅΄ν•κ³  μμ.
            - μ¶”μƒ(μΈν„°νμ΄μ¤) μμ΅΄ : `DiscountPolicy`
            - κµ¬μ²΄(κµ¬ν„) ν΄λμ¤ : `FixDiscountPolicy` , `RateDiscountPolicy`
            - `OrderServiceImpl`μ΄ `DiscountPolicy` μΈν„°νμ΄μ¤ λΏλ§ μ•„λ‹λΌ `FixDiscountPolicy`μΈ κµ¬μ²΄ ν΄λμ¤λ„ ν•¨κ» μμ΅΄ν•κ³  μλ‹¤. κ·Έλμ„ `FixDiscountPolicy` λ¥Ό `RateDiscountPolicy` λ΅ λ³€κ²½ν•λ” μκ°„ `OrderServiceImpl`μ μ†μ¤μ½”λ“λ„ ν•¨κ» λ³€κ²½ν•΄μ•Ό ν•λ‹¤ (OCP μ„λ°)
        - OCP : ν„μ¬ μ½”λ“λ” κΈ°λ¥μ„ ν™•μ¥ν•΄μ„ λ³€κ²½ν•λ©΄, ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— μν–¥μ„ μ¤€λ‹¤.

        - DIPλ¥Ό μ„λ°ν•μ§€ μ•λ„λ΅ μ¶”μƒ (μΈν„°νμ΄μ¤) μ—λ§ μμ΅΄ν•λ„λ΅ λ³€κ²½ν•΄μ•Ό ν•¨.

        ```java
        public class OrderServiceImpl implements OrderService {
        	//private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
        	private DiscountPolicy discountPolicy;
        }
        ```

      μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μ„¤κ³„μ™€ μ½”λ“λ¥Ό λ³€κ²½ν–μ§€λ§, κ·Έλ°λ° κµ¬ν„μ²΄κ°€ μ—†μ–΄μ„ null pointer exceptionμ΄ λ°μƒν•κ³  μ‹¤ν–‰μ΄ μ•λ¨.

        - ν•΄κ²°λ°©μ• - μ΄ λ¬Έμ λ¥Ό ν•΄κ²°ν•λ ¤λ©΄ λ„κµ°κ°€κ°€ ν΄λΌμ΄μ–ΈνΈμΈ `OrderServiceImpl` μ— `DiscountPolicy` μ κµ¬ν„ κ°μ²΄λ¥Ό λ€μ‹  μƒμ„±ν•κ³  μ£Όμ…ν•΄μ£Όμ–΄μ•Ό ν•λ‹¤.
    - κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬
        - `AppConfig` μƒμ„± - μ• ν”λ¦¬μΌ€μ΄μ…μ μ „μ²΄ λ™μ‘ λ°©μ‹μ„ κµ¬μ„±(config)ν•κΈ° μ„ν•΄, **κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±**ν•κ³ , **μ—°κ²°**ν•λ” μ±…μ„μ„ κ°€μ§€λ” λ³„λ„μ μ„¤μ • ν΄λμ¤λ¥Ό μƒμ„±

        ```java
        package hello.core;
        
        import hello.core.discount.FixDiscountPolicy;
        import hello.core.member.MemberService;
        import hello.core.member.MemberServiceImpl;
        import hello.core.member.MemoryMemberRepository;
        import hello.core.order.OrderService;
        import hello.core.order.OrderServiceImpl;
        
        public class AppConfig {
        
        	 public MemberService memberService() {
        		 return new MemberServiceImpl(new MemoryMemberRepository());
        	 }
        
        	 public OrderService orderService() {
        		 return new OrderServiceImpl(
        						 new MemoryMemberRepository(),
        						 new FixDiscountPolicy());
        	 }
        }
        ```

        - `AppConfig`λ” μ• ν”λ¦¬μΌ€μ΄μ…μ μ‹¤μ  λ™μ‘μ— ν•„μ”ν• κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•¨
            - `MemberServiceImpl`
            - `MemoryMemberRepository`
            - `OrderServiceImpl`
            - `FisDiscountPolicy`
        - `AppConfig`λ” μƒμ„±ν• κ°μ²΄ μΈμ¤ν„΄μ¤μ μ°Έμ΅°(λ νΌλ°μ¤)λ¥Ό μƒμ„±μλ¥Ό ν†µν•΄μ„ μ£Όμ…(μ—°κ²°)ν•΄μ¤.
            - **MemberServiceImpl β†’ MemoryMemberRepository**
            - **OrderServiceImpl β†’ MemoryMemberRepository, FixDiscountPolicy**

        - MemberServiceImpl - μƒμ„±μ μ£Όμ…

        ```java
        package hello.core.member;
        
        public class MemberServiceImpl implements MemberService {
        
        	 private final MemberRepository memberRepository;
        
        	 public MemberServiceImpl(MemberRepository memberRepository) {
        		 this.memberRepository = memberRepository;
        	 }
        
        	 public void join(Member member) {
        		 memberRepository.save(member);
        	 }
        
        	 public Member findMember(Long memberId) {
        		 return memberRepository.findById(memberId);
        	 }
        }
        ```

        - μ„¤κ³„ λ³€κ²½μΌλ΅ MemberServiceImplμ€ MemoryMemberRepositoryλ¥Ό μμ΅΄ν•μ§€ μ•μ.
        - λ‹¨μ§€ MemberRepository μΈν„°νμ΄μ¤λ§ μμ΅΄ν•¨
        - MemberServiceImpl μ…μ¥μ—μ„ μƒμ„±μλ¥Ό ν†µν•΄ μ–΄λ–¤ κµ¬ν„ κ°μ²΄κ°€ λ“¤μ–΄μ¬μ§€λ” μ• μ μ—†μ
        - MemberServiceImpl μ μƒμ„±μλ¥Ό ν†µν•΄μ„ μ–΄λ–¤ κµ¬ν„ κ°μ²΄λ¥Ό μ£Όμ…ν• μ§€λ” μ¤μ§ μ™Έλ¶€(AppConfig)μ—μ„ κ²°μ •λλ‹¤.
        - MemberServiceImpl μ€ μ΄μ λ¶€ν„° μμ΅΄κ΄€κ³„μ— λ€ν• κ³ λ―Όμ€ μ™Έλ¶€μ— λ§΅κΈ°κ³  μ‹¤ν–‰μ—λ§ μ§‘μ¤‘ν•λ©΄ λλ‹¤.

        - κ°μ²΄μ μƒμ„±κ³Ό μ—°κ²°μ€ `AppConfig`κ°€ λ‹΄λ‹Ήν•λ‹¤.
        - DIP μ™„μ„± : MemberServiceImplμ€ MemberRepositoryμΈ μ¶”μƒμ—λ§ μμ΅΄ν•λ©΄ λλ‹¤. μ΄μ  κµ¬μ²΄ ν΄λμ¤λ¥Ό λ°λΌλ„ λ¨
        - κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬ : κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ—°κ²°ν•λ” μ—­ν• κ³Ό μ‹¤ν–‰ν•λ” μ—­ν• μ΄ λ…ν™•ν λ¶„λ¦¬λ¨

        - **appConfig** κ°μ²΄λ” **memoryMemberRepository** κ°μ²΄λ¥Ό μƒμ„±ν•κ³  κ·Έ μ°Έμ΅°κ°’μ„ **memberServiceImpl**μ„ μƒμ„±ν•λ©΄μ„ μƒμ„±μλ΅ μ „λ‹¬λ¨
        - ν΄λΌμ΄μ–ΈνΈμΈ `memberServiceImpl` μ…μ¥μ—μ„ λ³΄λ©΄ μμ΅΄κ΄€κ³„λ¥Ό λ§μΉ μ™Έλ¶€μ—μ„ μ£Όμ…ν•΄μ£Όλ” κ²ƒ κ°™λ‹¤κ³  ν•΄μ„ **DI(Dependency Injection)** μ°λ¦¬λ§λ΅ μμ΅΄κ΄€κ³„ μ£Όμ… λλ” μμ΅΄μ„± μ£Όμ…μ΄λΌ ν•λ‹¤.

        - **OrderServiceImpl** - μƒμ„±μ μ£Όμ…

        ```java
        package hello.core.order;
        
        import hello.core.discount.DiscountPolicy;
        import hello.core.member.Member;
        import hello.core.member.MemberRepository;
        
        public class OrderServiceImpl implements OrderService {
        
        	 private final MemberRepository memberRepository;
        	 private final DiscountPolicy discountPolicy;
        
        	 public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy
        discountPolicy) {
        		 this.memberRepository = memberRepository;
        		 this.discountPolicy = discountPolicy;
        	 }
        
        	 @Override
        	 public Order createOrder(Long memberId, String itemName, int itemPrice) {
        
        		 Member member = memberRepository.findById(memberId);
        		 int discountPrice = discountPolicy.discount(member, itemPrice);
        
        		 return new Order(memberId, itemName, itemPrice, discountPrice);
        	 }
        }
        ```

        - μ„¤κ³„ λ³€κ²½μΌλ΅ OrderServiceImplμ€ FixDiscountPolicyλ¥Ό μμ΅΄ν•μ§€ μ•κ² λ¨
        - λ‹¨μ§€ DiscountPolicy μΈν„°νμ΄μ¤λ§ μμ΅΄ν•¨
        - OrderServiceImpl μ…μ¥μ—μ„ μƒμ„±μλ¥Ό ν†µν•΄ μ–΄λ–¤ κµ¬ν„ κ°μ²΄κ°€ λ“¤μ–΄μ¬μ§€λ” μ• μ μ—†μ
        - OrderServiceImpl μ μƒμ„±μλ¥Ό ν†µν•΄μ„ μ–΄λ–¤ κµ¬ν„ κ°μ²΄λ¥Ό μ£Όμ…ν• μ§€λ” μ¤μ§ μ™Έλ¶€(`AppConfig`)μ—μ„ κ²°μ •ν•λ‹¤
        - OrderServiceImplμ€ μ΄μ λ¶€ν„° μ‹¤ν–‰μ—λ§ μ§‘μ¤‘ν•λ©΄ λ¨.
        - OrderServiceImplμ—λ” MemoryMemberRepository, FixDiscountPolicy κ°μ²΄μ μμ΅΄κ΄€κ³„κ°€ μ£Όμ…λ¨

        <aside>
        π’΅ ν…μ¤νΈ μ½”λ“μ—μ„ `@BeforeEach`λ” κ° ν…μ¤νΈλ¥Ό μ‹¤ν–‰ν•κΈ° μ „μ— νΈμ¶λλ‹¤.

        </aside>

        - μ •λ¦¬
            - AppConfigλ¥Ό ν†µν•΄ κ΄€μ‹¬μ‚¬λ¥Ό ν™•μ‹¤ν•κ² λ¶„λ¦¬ν•¨.
            - AppConfigλ” κµ¬μ²΄ ν΄λμ¤λ¥Ό μ„ νƒν•λ‹¤. λ°°μ—­μ— λ§λ” λ‹΄λ‹Ή λ°°μ°λ¥Ό μ„ νƒν•λ‹¤. μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ–΄λ–»κ² λ™μ‘ν•΄μ•Ό ν• μ§€ μ „μ²΄ κµ¬μ„±μ„ μ±…μ„μ§„λ‹¤.
            - μ΄μ  κ° λ°°μ°λ“¤μ€ λ‹΄λ‹Ή κΈ°λ¥μ„ μ‹¤ν–‰ν•λ” μ±…μ„λ§ μ§€λ©΄ λλ‹¤.

    - AppConfig λ¦¬ν©ν„°λ§
        - μ„¤μ •(κµ¬μ„±) μ •λ³΄μ—λ” ν• λμ— μ—­ν• μ— λ”°λ¥Έ κµ¬ν„λ“¤μ΄ μ λ³΄μ—¬μ•Ό ν•μ§€λ§, ν„μ¬ AppConfigλ” κ·Έλ ‡μ§€ μ•κ³  μ¤‘λ³µλ„ μ΅΄μ¬ν•¨.

        - λ¦¬ν©ν„°λ§ μ „

        ```java
        public class AppConfig {
        	 public MemberService memberService() {
        		 return new MemberServiceImpl(new MemoryMemberRepository());
        	 }
        
        	 public OrderService orderService() {
        		 return new OrderServiceImpl(
        						 new MemoryMemberRepository(),
        						 new FixDiscountPolicy());
        	 }
        }
        ```

        - λ¦¬ν©ν„°λ§ ν›„

        ```java
        public class AppConfig {
        
        	 public MemberService memberService() {
        		 return new MemberServiceImpl(memberRepository());
        	 }
        
        	 public OrderService orderService() {
        		 return new OrderServiceImpl(
        							 memberRepository(),
        							 discountPolicy());
        	 }
        
        	 public MemberRepository memberRepository() {
        		 return new MemoryMemberRepository();
        	 }
        
        	 public DiscountPolicy discountPolicy() {
        		 return new FixDiscountPolicy();
        	 }
        }
        ```

        - `new MemoryMemberRepository()` μ΄ λ¶€λ¶„μ΄ μ¤‘λ³µ μ κ±°λμ—λ‹¤. μ΄μ  **MemoryMemberRepository**λ¥Ό λ‹¤λ¥Έ κµ¬ν„μ²΄λ΅ λ³€κ²½ν•  λ• ν• λ¶€λ¶„λ§ λ³€κ²½ν•λ©΄ λλ‹¤.
        - **AppConfig**λ¥Ό λ³΄λ©΄ μ΄μ  μ—­ν• κ³Ό κµ¬ν„ ν΄λμ¤κ°€ ν• λμ— λ“¤μ–΄μ¨λ‹¤. μ• ν”λ¦¬μΌ€μ΄μ… μ „μ²΄ κµ¬μ„±μ΄ μ–΄λ–»κ² λμ–΄μλ”μ§€ λΉ λ¥΄κ² νμ•…ν•  μ μλ‹¤.

    - μƒλ΅μ΄ κµ¬μ΅°μ™€ ν• μΈ μ •μ±… μ μ©
        - λ‹¤μ‹ μ²μμΌλ΅ λμ•„κ°€μ„ μ •μ•΅ ν• μΈ μ •μ±…μ„ μ •λ¥  ν• μΈ μ •μ±…μΌλ΅ λ³€κ²½ν•κΈ°
        - FixDiscountPolicy β†’ RateDiscountPolicy

      **AppConfigμ λ“±μ¥μΌλ΅ μ• ν”λ¦¬μΌ€μ΄μ…μ΄ ν¬κ² μ‚¬μ© μμ—­κ³Ό, κ°μ²΄λ¥Ό μƒμ„±ν•κ³  κµ¬μ„±(Configuration)ν•λ” μμ—­μΌλ΅ λ¶„λ¦¬λμ—λ‹¤.**

        - `FixDiscountPolicy` β†’ `RateDiscountPolicy` λ΅ λ³€κ²½ν•΄λ„ κµ¬μ„± μμ—­λ§ μν–¥μ„ λ°›κ³ , μ‚¬μ© μμ—­μ€ μ „ν€ μν–¥μ„ λ°›μ§€ μ•λ”λ‹¤.
        - λ³€κ²½ μ‚¬ν•­ (AppConfig)

        ```java
        public DiscountPolicy discountPolicy() {
        
        	// return new FixDiscountPolicy();
        	 return new RateDiscountPolicy();
        
        }
        ```

        - μ΄μ  ν• μΈ μ •μ±…μ„ λ³€κ²½ν•΄λ„, μ• ν”λ¦¬μΌ€μ΄μ…μ κµ¬μ„± μ—­ν• μ„ λ‹΄λ‹Ήν•λ” **AppConfig**λ§ λ³€κ²½ν•λ©΄ λλ‹¤.
        - ν΄λΌμ΄μ–ΈνΈ μ½”λ“μΈ `OrderServiceImpl` λ¥Ό ν¬ν•¨ν•΄μ„ μ‚¬μ© μμ—­μ μ–΄λ–¤ μ½”λ“λ„ λ³€κ²½ν•  ν•„μ”κ°€ μ—†λ‹¤.

    - μΆ‹μ€ κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ 5κ°€μ§€ μ›μΉ™μ μ μ©


        **SRP λ‹¨μΌ μ±…μ„ μ›μΉ™ : ν• ν΄λμ¤λ” ν•λ‚μ μ±…μ„λ§ κ°€μ Έμ•Ό ν•λ‹¤.**

- κΈ°μ΅΄ ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ” μ§μ ‘ κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³ , μ—°κ²°ν•κ³ , μ‹¤ν–‰ν•λ” λ‹¤μ–‘ν• μ±…μ„μ„ κ°€μ§€κ³  μμ—μ
- SRP λ‹¨μΌ μ±…μ„ μ›μΉ™μ„ λ”°λ¥΄λ©΄μ„ κ΄€μ‹¬μ‚¬λ¥Ό λ¶„λ¦¬ν•¨
- κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ—°κ²°ν•λ” μ±…μ„μ€ AppConfigκ°€ λ‹΄λ‹Ή
- ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ” μ‹¤ν–‰ν•λ” μ±…μ„λ§ λ‹΄λ‹Ήν•κ² λ¨

**DIP μμ΅΄κ΄€κ³„ μ—­μ „ μ›μΉ™ : ν”„λ΅κ·Έλλ¨Έλ” μ¶”μƒν™”μ— μμ΅΄ν•΄μ•Όμ§€, κµ¬μ²΄ν™”μ— μμ΅΄ν•λ©΄ μ•λλ‹¤. μμ΅΄μ„± μ£Όμ…μ€ μ΄ μ›μΉ™μ„ λ”°λ¥΄λ” λ°©λ²• μ¤‘ ν•λ‚λ‹¤.**

- μƒλ΅μ΄ ν• μΈ μ •μ±…μ„ κ°λ°ν•κ³ , μ μ©ν•λ ¤κ³  ν•λ‹ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ„ ν•¨κ» λ³€κ²½ν•΄μ•Ό ν–λ‹¤. μ™λƒν•λ©΄ κΈ°μ΅΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” FixDiscountPolicy κµ¬μ²΄ν™” κµ¬ν„ ν΄λμ¤μ—λ„ ν•¨κ» μμ΅΄ν–λ‹¤.
- ν΄λΌμ΄μ–ΈνΈ μ½”λ“κ°€ DiscountPolicy μ¶”μƒν™” μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μ½”λ“λ¥Ό λ³€κ²½ν–λ‹¤.
- ν•μ§€λ§ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” μΈν„°νμ΄μ¤λ§μΌλ΅λ” μ•„λ¬΄κ²ƒλ„ μ‹¤ν–‰ν•  μ μ—†λ‹¤.
- AppConfigκ°€ FixDiscountPolicy κ°μ²΄ μΈμ¤ν„΄μ¤λ¥Ό ν΄λΌμ΄μ–ΈνΈ μ½”λ“ λ€μ‹  μƒμ„±ν•΄μ„ ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— μμ΅΄κ΄€κ³„λ¥Ό μ£Όμ…ν–λ‹¤. μ΄λ ‡κ²ν•΄μ„ DIP μ›μΉ™μ„ λ”°λ¥΄λ©΄μ„ λ¬Έμ λ„ ν•΄κ²°ν–λ‹¤.

**OCP : μ†ν”„νΈμ›¨μ–΄ μ”μ†λ” ν™•μ¥μ—λ” μ—΄λ ¤ μμΌλ‚ λ³€κ²½μ—λ” λ‹«ν€ μμ–΄μ•Ό ν•λ‹¤.**

- λ‹¤ν•μ„± μ‚¬μ©ν•κ³  ν΄λΌμ΄μ–ΈνΈκ°€ DIPλ¥Ό μ§€ν‚΄
- μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ‚¬μ© μμ—­κ³Ό κµ¬μ„± μμ—­μΌλ΅ λ‚λ”
- AppConfigκ°€ μμ΅΄κ΄€κ³„λ¥Ό `FixDiscountPolicy` β†’ `RateDiscountPolicy` λ΅ λ³€κ²½ν•΄μ„ ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— μ£Όμ…ν•λ―€λ΅ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” λ³€κ²½ν•μ§€ μ•μ•„λ„ λ¨
- **μ†ν”„νΈμ›¨μ–΄ μ”μ†λ¥Ό μƒλ΅­κ² ν™•μ¥ν•΄λ„ μ‚¬μ© μμ—­μ λ³€κ²½μ€ λ‹«ν€ μλ‹¤(λ³€κ²½ν•  ν•„μ”κ°€ μ—†λ‹¤).**

### IoC, DI, κ·Έλ¦¬κ³  μ»¨ν…μ΄λ„

### μ μ–΄μ μ—­μ „ IoC(Inversion of Control)

β†’ ν”„λ΅κ·Έλ¨μ μ μ–΄ νλ¦„μ„ μ§μ ‘ μ μ–΄ν•λ” κ²ƒμ΄ μ•„λ‹λΌ μ™Έλ¶€μ—μ„ κ΄€λ¦¬ν•λ” κ²ƒμ„ μ μ–΄μ μ—­μ „(IoC)μ΄λΌκ³  ν•λ‹¤. ex) **AppConfig(ν”„λ΅κ·Έλ¨μ— λ€ν• μ μ–΄ νλ¦„μ κ¶ν•μ„ λ¨λ‘ κ°–κ³ μμ.)**

### ν”„λ μ„μ›ν¬ vs λΌμ΄λΈλ¬λ¦¬

- ν”„λ μ„μ›ν¬κ°€ λ‚΄κ°€ μ‘μ„±ν• μ½”λ“λ¥Ό μ μ–΄ν•κ³ , λ€μ‹  μ‹¤ν–‰ν•λ©΄ κ·Έκ²ƒμ€ ν”„λ μ„μ›ν¬κ°€ λ§λ‹¤. (JUnit)
- λ°λ©΄μ— λ‚΄κ°€ μ‘μ„±ν• μ½”λ“κ°€ μ§μ ‘ μ μ–΄μ νλ¦„μ„ λ‹΄λ‹Ήν•λ‹¤λ©΄ κ·Έκ²ƒμ€ ν”„λ μ„μ›ν¬κ°€ μ•„λ‹λΌ λΌμ΄λΈλ¬λ¦¬λ‹¤.

### μμ΅΄κ΄€κ³„ μ£Όμ… DI(Dependency Injection)

- **OrderServiceImpl** μ€ **DiscountPolicy** μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ‹¤. μ‹¤μ  μ–΄λ–¤ κµ¬ν„ κ°μ²΄κ°€ μ‚¬μ©λ μ§€λ” λ¨λ¥Έλ‹¤.
- μμ΅΄κ΄€κ³„λ” **μ •μ μΈ ν΄λμ¤ μμ΅΄ κ΄€κ³„μ™€, μ‹¤ν–‰ μ‹μ μ— κ²°μ •λλ” λ™μ μΈ κ°μ²΄(μΈμ¤ν„΄μ¤) μμ΅΄ κ΄€κ³„** λ‘μ„ λ¶„λ¦¬ν•΄μ„ μƒκ°ν•΄μ•Ό ν•λ‹¤.

**μ •μ μΈ ν΄λμ¤ μμ΅΄ κ΄€κ³„**

- ν΄λμ¤κ°€ μ‚¬μ©ν•λ” import μ½”λ“λ§ λ³΄κ³  μμ΅΄κ΄€κ³„λ¥Ό μ‰½κ² νλ‹¨ν•  μ μλ‹¤. μ •μ μΈ μμ΅΄κ΄€κ³„λ” μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ‹¤ν–‰ν•μ§€ μ•μ•„λ„ λ¶„μ„ν•  μ μλ‹¤.
- **OrderServiceImpl** μ€ **MemberRepository , DiscountPolicy** μ— μμ΅΄ν•λ‹¤.
- κ·Έλ°λ° μ΄λ¬ν• ν΄λμ¤ μμ΅΄κ΄€κ³„ λ§μΌλ΅λ” μ‹¤μ  μ–΄λ–¤ κ°μ²΄κ°€ **OrderServiceImpl** μ— μ£Όμ… λ μ§€ μ• μ μ—†λ‹¤.

**λ™μ μΈ κ°μ²΄ μΈμ¤ν„΄μ¤ μμ΅΄ κ΄€κ³„**

μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰ μ‹μ μ— μ‹¤μ  μƒμ„±λ κ°μ²΄ μΈμ¤ν„΄μ¤μ μ°Έμ΅°κ°€ μ—°κ²°λ μμ΅΄ κ΄€κ³„λ‹¤.

- μ• ν”λ¦¬μΌ€μ΄μ… **μ‹¤ν–‰ μ‹μ (λ°νƒ€μ„)**μ— μ™Έλ¶€μ—μ„ μ‹¤μ  κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  ν΄λΌμ΄μ–ΈνΈμ— μ „λ‹¬ν•΄μ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ μ‹¤μ  μμ΅΄κ΄€κ³„κ°€ μ—°κ²°λλ” κ²ƒμ„ **μμ΅΄κ΄€κ³„ μ£Όμ…**μ΄λΌ ν•λ‹¤.
- κ°μ²΄ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•κ³ , κ·Έ μ°Έμ΅°κ°’μ„ μ „λ‹¬ν•΄μ„ μ—°κ²°λλ‹¤.
- μμ΅΄κ΄€κ³„ μ£Όμ…μ„ μ‚¬μ©ν•λ©΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό λ³€κ²½ν•μ§€ μ•κ³ , ν΄λΌμ΄μ–ΈνΈκ°€ νΈμ¶ν•λ” λ€μƒμ νƒ€μ… μΈμ¤ν„΄μ¤λ¥Ό λ³€κ²½ν•  μ μλ‹¤.
- μμ΅΄κ΄€κ³„ μ£Όμ…μ„ μ‚¬μ©ν•λ©΄ μ •μ μΈ ν΄λμ¤ μμ΅΄κ΄€κ³„λ¥Ό λ³€κ²½ν•μ§€ μ•κ³ , λ™μ μΈ κ°μ²΄ μΈμ¤ν„΄μ¤ μμ΅΄κ΄€κ³„λ¥Ό μ‰½κ² λ³€κ²½ν•  μ μλ‹¤.

### IoC μ»¨ν…μ΄λ„, DI μ»¨ν…μ΄λ„

- AppConfig μ²λΌ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬ν•λ©΄μ„ μμ΅΄κ΄€κ³„λ¥Ό μ—°κ²°ν•΄ μ£Όλ” κ²ƒμ„ IoC μ»¨ν…μ΄λ„ λλ” **DI μ»¨ν…μ΄λ„**λΌ ν•λ‹¤.
- μμ΅΄κ΄€κ³„ μ£Όμ…μ— μ΄μ μ„ λ§μ¶”μ–΄ μµκ·Όμ—λ” μ£Όλ΅ DI μ»¨ν…μ΄λ„λΌ ν•λ‹¤. λλ” μ–΄μƒλΈ”λ¬, μ¤λΈμ νΈ ν©ν† λ¦¬ λ“±μΌλ΅ λ¶λ¦¬κΈ°λ„ ν•λ‹¤.


## μ¤ν”„λ§μΌλ΅ μ „ν™ν•κΈ°

AppConfig μ¤ν”„λ§ κΈ°λ°μΌλ΅ λ³€κ²½

```java
package hello.core;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.RateDiscountPolicy;
import hello.core.member.MemberRepository;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class AppConfig {

	 @Bean
	 public MemberService memberService() {
		 return new MemberServiceImpl(memberRepository());
	 }

	 @Bean
	 public OrderService orderService() {
		 return new OrderServiceImpl(
							 memberRepository(),
							 discountPolicy());
	 }

	 @Bean
	 public MemberRepository memberRepository() {
		 return new MemoryMemberRepository();
	 }

	 @Bean
	 public DiscountPolicy discountPolicy() {
		 return new RateDiscountPolicy();
	 }
}
```

- AppConfigμ— μ„¤μ •μ„ κµ¬μ„±ν•λ‹¤λ” λ»μ **@Configuration** μ„ λ¶™μ—¬μ¤€λ‹¤.
- κ° λ©”μ„λ“μ— **@Bean** μ„ λ¶™μ—¬μ¤€λ‹¤. μ΄λ ‡κ² ν•λ©΄ μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— μ¤ν”„λ§ λΉμΌλ΅ λ“±λ΅ν•λ‹¤.

MemberAppμ— μ¤ν”„λ§ μ»¨ν…μ΄λ„ μ μ©

```java
public class MemberApp {

 public static void main(String[] args) {
// AppConfig appConfig = new AppConfig();
// MemberService memberService = appConfig.memberService();
	 ApplicationContext applicationContext = new
AnnotationConfigApplicationContext(AppConfig.class);
	 MemberService memberService =
applicationContext.getBean("memberService", MemberService.class);

	 Member member = new Member(1L, "memberA", Grade.VIP);
	 memberService.join(member);

	 Member findMember = memberService.findMember(1L);
	 System.out.println("new member = " + member.getName());
	 System.out.println("find Member = " + findMember.getName());
 }
}
```

OrderAppμ— μ¤ν”„λ§ μ»¨ν…μ΄λ„ μ μ©

```java
public class OrderApp {

 public static void main(String[] args) {
// AppConfig appConfig = new AppConfig();
// MemberService memberService = appConfig.memberService();
// OrderService orderService = appConfig.orderService();

	 ApplicationContext applicationContext = new
AnnotationConfigApplicationContext(AppConfig.class);
	 MemberService memberService =
applicationContext.getBean("memberService", MemberService.class);
	 OrderService orderService = applicationContext.getBean("orderService",
OrderService.class);

	 long memberId = 1L;
	 Member member = new Member(memberId, "memberA", Grade.VIP);
	 memberService.join(member);

	 Order order = orderService.createOrder(memberId, "itemA", 10000);

	 System.out.println("order = " + order);
 }
}
```

- λ‘ μ½”λ“λ¥Ό μ‹¤ν–‰ν•λ©΄ μ¤ν”„λ§ κ΄€λ ¨ λ΅κ·Έκ°€ λ‡μ¤„ μ‹¤ν–‰λλ©΄μ„ κΈ°μ΅΄κ³Ό λ™μΌν• κ²°κ³Όκ°€ μ¶λ ¥λλ‹¤.

### μ¤ν”„λ§ μ»¨ν…μ΄λ„

- `ApplicationContext`λ¥Ό μ¤ν”„λ§ μ»¨ν…μ΄λ„λΌ ν•λ‹¤.
- κΈ°μ΅΄μ—λ” κ°λ°μκ°€ AppConfig λ¥Ό μ‚¬μ©ν•΄μ„ μ§μ ‘ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  DIλ¥Ό ν–μ§€λ§, μ΄μ λ¶€ν„°λ” μ¤ν”„λ§ μ»¨ν…μ΄λ„λ¥Ό ν†µν•΄μ„ μ‚¬μ©ν•λ‹¤.
- μ¤ν”„λ§ μ»¨ν…μ΄λ„λ” `@Configuration` μ΄ λ¶™μ€ AppConfig λ¥Ό μ„¤μ •(κµ¬μ„±) μ •λ³΄λ΅ μ‚¬μ©ν•λ‹¤. μ—¬κΈ°μ„ `@Bean`μ΄λΌ μ ν λ©”μ„λ“λ¥Ό λ¨λ‘ νΈμ¶ν•΄μ„ λ°ν™λ κ°μ²΄λ¥Ό μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— λ“±λ΅ν•λ‹¤. μ΄λ ‡κ² μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— λ“±λ΅λ κ°μ²΄λ¥Ό μ¤ν”„λ§ λΉμ΄λΌ ν•λ‹¤.
- μ¤ν”„λ§ λΉμ€ `@Bean` μ΄ λ¶™μ€ λ©”μ„λ“μ λ…μ„ μ¤ν”„λ§ λΉμ μ΄λ¦„μΌλ΅ μ‚¬μ©ν•λ‹¤. **(memberService , orderService)**
- μ΄μ „μ—λ” κ°λ°μκ°€ ν•„μ”ν• κ°μ²΄λ¥Ό AppConfig λ¥Ό μ‚¬μ©ν•΄μ„ μ§μ ‘ μ΅°νν–μ§€λ§, μ΄μ λ¶€ν„°λ” μ¤ν”„λ§ μ»¨ν…μ΄λ„λ¥Ό ν†µν•΄μ„ ν•„μ”ν• μ¤ν”„λ§ λΉ(κ°μ²΄)λ¥Ό μ°Ύμ•„μ•Ό ν•λ‹¤. μ¤ν”„λ§ λΉμ€ **applicationContext.getBean()** λ©”μ„λ“λ¥Ό μ‚¬μ©ν•΄μ„ μ°Ύμ„ μ μλ‹¤.
- κΈ°μ΅΄μ—λ” κ°λ°μκ°€ μ§μ ‘ μλ°”μ½”λ“λ΅ λ¨λ“  κ²ƒμ„ ν–λ‹¤λ©΄ μ΄μ λ¶€ν„°λ” μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— κ°μ²΄λ¥Ό μ¤ν”„λ§ λΉμΌλ΅ λ“±λ΅ν•κ³ , μ¤ν”„λ§ μ»¨ν…μ΄λ„μ—μ„ μ¤ν”„λ§ λΉμ„ μ°Ύμ•„μ„ μ‚¬μ©ν•λ„λ΅ λ³€κ²½λμ—λ‹¤.

μ½”λ“κ°€ μ•½κ°„ λ” λ³µμ΅ν•΄μ§„ κ²ƒ κ°™μ€λ°, μ¤ν”„λ§ μ»¨ν…μ΄λ„λ¥Ό μ‚¬μ©ν•λ©΄ μ–΄λ–¤ μ¥μ μ΄ μμ„κΉ?